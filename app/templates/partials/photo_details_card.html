<div class="card">
  <div class="card-header">Details</div>
  <div class="card-body">
    <dl class="row mb-0">
      <dt class="col-4">GUID</dt>
      <dd class="col-8"><code>{{ photo.guid }}</code></dd>

      <dt class="col-4">Path</dt>
      <dd class="col-8"><span class="text-muted">{{ photo.rel_path }}</span></dd>

      <dt class="col-4">Rating</dt>
      <dd class="col-8">{{ photo.rating or 0 }}</dd>

      <dt class="col-4">Size</dt>
      <dd class="col-8">{{ photo.width }}×{{ photo.height }} ({{ photo.file_size }} bytes)</dd>

      <dt class="col-4">Location</dt>
      <dd class="col-8">
        {% if photo.gps_latitude is not none and photo.gps_longitude is not none %}
          {{ photo.gps_latitude }}, {{ photo.gps_longitude }}
        {% else %}
          <span class="text-muted">—</span>
        {% endif %}
      </dd>

      <dt class="col-4">Geo</dt>
      <dd class="col-8">
        {% if photo.geo_display_name %}
          {{ photo.geo_display_name }}
        {% else %}
          <span class="text-muted">—</span>
        {% endif %}
      </dd>

      <dt class="col-4">Geo Lookup</dt>
      <dd class="col-8">
        {% if photo.geo_lookup_status == "ok" %}
          <span class="text-success" title="Lookup ok">●</span> ok
        {% elif photo.geo_lookup_status == "miss" %}
          <span class="text-secondary" title="No result from provider">●</span> miss
        {% elif photo.geo_lookup_status == "error" %}
          <span class="text-danger" title="Lookup failed">●</span> error
          {% if photo.geo_lookup_error %}
            <span class="text-muted">({{ photo.geo_lookup_error }})</span>
          {% endif %}
        {% else %}
          <span class="text-muted">—</span>
        {% endif %}
      </dd>

      <dt class="col-4">Tags</dt>
      <dd class="col-8" id="photoTags" data-photo-guid="{{ photo.guid }}">
        {% if photo_tags and photo_tags|length > 0 %}
          <div class="d-flex flex-wrap gap-1">
            {% for t in photo_tags %}
              <span class="badge bg-{{ t.color }} {% if t.color == 'warning' %}text-dark{% else %}text-light{% endif %}">
                {{ t.name }}
                <button type="button" class="btn btn-sm btn-link p-0 ms-1 text-reset tag-remove" data-tag-id="{{ t.id }}" aria-label="Remove tag">×</button>
              </span>
            {% endfor %}
          </div>
        {% else %}
          <span class="text-muted">—</span>
        {% endif %}

        <div class="mt-2 d-flex gap-2 align-items-center flex-wrap">
          <select class="form-select form-select-sm" id="detailTagSelect" style="max-width: 16rem;">
            <option value="" selected disabled>Add a tag…</option>
            {% for t in tags %}
              <option value="{{ t.id }}">{{ t.name }}</option>
            {% endfor %}
          </select>
          <button type="button" class="btn btn-outline-primary btn-sm" id="detailTagAdd">Add</button>
        </div>
      </dd>
    </dl>
  </div>
</div>
